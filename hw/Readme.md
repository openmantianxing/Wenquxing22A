# Hardware Design Source Code of Wenquxing 22A
## SNN Unit in Wenquxing 22A
**Files of SNN Unit in Wenquxing 22A**
```
hw/src/
├── main
│   └── scala
│       ├── bus             #Bus related files
│       ├── device          #Peripherals related
│       ├── nutcore         
│       │   ├── backend
│       │   │   ├── fu 
│       │   │   │   ├── ...
│       │   │   │   ├── SNN                     #SNN computing Unit
│       │   │   │   │   ├── LTD.scala           #LTD process unit
│       │   │   │   │   ├── Neuron.scala        #Neuron update unit
│       │   │   │   │   ├── SNN.scala           #Top file of SNN unit
│       │   │   │   │   ├── SpikePP.scala       #Spike process unit
│       │   │   │   │   └── STDP.scala          #LTP process unit
|       |   |   |   └── ...
|       |   |   └── ...
|       |   └── ...
|       └── ...
└── ...
```
The detailed introduction is in [doc](../doc/README.md).

## Generate Verilog
```
$ make board=pynq
```
The `TopMain.v` will be generated in `build\` dir.

## Run Emulator
```
$ make emu
or
$ make IMAGE=yourImageFile.bin emu
```
Specify your image file. Make sure you have Verilator on your device. The default IMAGE is `ready-to-run/linux.bin`.

## Simulation and FPGA Implement Tips

When simulate Wenquxing 22A or implement it on the FPGA platform, care should be taken with the following tips:

- To generate a emulator to simulate Wenquxing 22A, one should follow the instructions above or from [Nutshell](../README.md) where the README descripes detailed dependencies and operations how to use provided image or other images.
- To test the RV-SNN, we provide the [SNN-AM](https://github.com/openmantianxing/snn-am) which consists a headfile using Inline assembly to call the RV-SNN to verify the functional coverage.
- For FPGA implementation, [here](https://github.com/ssdfghhhhhhh/NutShell_U250) is a vivado project using U250 platform. To use this project, one should replace the top Verilog file in `/build/` folder with the verilog file generated by the chisel code of Wenquing 22A in Section `Generate Verilog`.
- For verification, click [here](../hw/verif/snn/README.md); for FPGA tests, click [here](../sw/README.md). 
